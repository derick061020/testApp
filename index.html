<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>YouTube Video Player</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { 
            font-family: sans-serif; 
            max-width: 800px; 
            margin: 0 auto; 
            padding: 20px; 
            text-align: center; 
        }
        #youtube-url {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <h1>YouTube Video Player</h1>
    <input type="text" id="youtube-url" placeholder="Pega aquÃ­ el enlace de YouTube">
    <button onclick="loadYouTubeVideo()">Reproducir</button>

    <div id="player-container">
        <img id="thumbnail" src="" style="max-width: 100%; display: none;">
    </div>

    <script>
        async function loadYouTubeVideo() {
            const youtubeUrlInput = document.getElementById('youtube-url');
            const videoUrl = youtubeUrlInput.value.trim();

            if (!videoUrl) {
                alert('Por favor, ingresa un enlace de YouTube');
                return;
            }

            try {
                const response = await fetch(`get_youtube_audio.php?url=${encodeURIComponent(videoUrl)}`);
                const data = await response.json();
                console.log(data);

                if (data.error) {
                    throw new Error(data.error);
                }

                // Mostrar miniatura
                const thumbnailEl = document.getElementById('thumbnail');
                thumbnailEl.src = data.thumbnail_url;
                thumbnailEl.style.display = 'block';

                // Crear un nuevo Audio con la URL
                const audioPlayer = new Audio(data.audio_url);
                audioPlayer.play();

                // Imprimir URLs en consola
                console.log('Audio URL:', data.audio_url);
                console.log('Video URL:', data.video_with_audio_url);
                console.log('Thumbnail URL:', data.thumbnail_url);

            } catch (error) {
                console.error('Error:', error);
                alert('No se pudo cargar el video. Verifica el enlace.');
            }
        }
    </script>
</body>
</html>